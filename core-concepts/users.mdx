---
title: Users & Subscribers
description: Managing user profiles and channel preferences in SuprSend
icon: "users"
---

## Understanding Users

In SuprSend, a **user** (also called a **subscriber**) represents an individual who can receive notifications across various channels. Each user is uniquely identified by a `distinct_id` and can have multiple communication channels associated with their profile.

<Tip>
Think of users as central profiles that store all the information needed to reach someone - their email addresses, phone numbers, push tokens, and notification preferences.
</Tip>

## The Distinct ID

The `distinct_id` is the cornerstone of user management in SuprSend. It's a unique identifier that links a user in your application to their SuprSend profile.

```python
distinct_id = "user-123"  # Could be your database ID, UUID, email, etc.
```

<Info>
The `distinct_id` must be:
- A non-empty string
- Unique across your application
- Consistent - use the same ID for a user across all interactions
</Info>

### Best Practices for distinct_id

- Use your internal user ID or UUID
- Avoid using PII (personally identifiable information) directly
- Keep it immutable - don't change a user's distinct_id
- Use the same distinct_id across events, workflows, and profile updates

## User Profiles

User profiles store persistent information about your users, including their communication channels, preferences, and custom properties.

### Creating a User Instance

```python
from suprsend import Suprsend

# Initialize client
supr_client = Suprsend("your_workspace_key", "your_workspace_secret")

# Get a user instance
user = supr_client.user.get_instance(distinct_id="user-123")
```

<Note>
The `get_instance()` method doesn't make an API call - it simply creates a local user object that you can modify and save later.
</Note>

## Managing User Channels

Once you have a user instance, you can add or remove various communication channels.

### Email

```python
# Add email
user.add_email("user@example.com")

# Remove email
user.remove_email("user@example.com")
```

### SMS

```python
# Add SMS (include country code)
user.add_sms("+1234567890")

# Remove SMS
user.remove_sms("+1234567890")
```

### WhatsApp

```python
# Add WhatsApp (include country code)
user.add_whatsapp("+1234567890")

# Remove WhatsApp
user.remove_whatsapp("+1234567890")
```

### Android Push

```python
# Add FCM token (default provider)
user.add_androidpush("fcm_token_here")

# Add with specific provider
user.add_androidpush("xiaomi_token_here", provider="xiaomi")
user.add_androidpush("oppo_token_here", provider="oppo")

# Remove Android push token
user.remove_androidpush("fcm_token_here")
user.remove_androidpush("xiaomi_token_here", provider="xiaomi")
```

### iOS Push

```python
# Add iOS push token (APNS)
user.add_iospush("apns_token_here")

# Remove iOS push token
user.remove_iospush("apns_token_here")
```

### Web Push

```python
# Add web push subscription
web_push_subscription = {
    "endpoint": "https://fcm.googleapis.com/fcm/send/...",
    "keys": {
        "p256dh": "key_here",
        "auth": "auth_here"
    }
}
user.add_webpush(web_push_subscription, provider="vapid")

# Remove web push
user.remove_webpush(web_push_subscription)
```

### Slack

```python
# DM user via email
user.add_slack({
    "email": "user@example.com",
    "access_token": "xoxb-your-bot-token"
})

# DM user via Slack user ID
user.add_slack({
    "user_id": "U03XXXXXXXX",
    "access_token": "xoxb-your-bot-token"
})

# Post to channel
user.add_slack({
    "channel_id": "C03XXXXXXXX",
    "access_token": "xoxb-your-bot-token"
})

# Use incoming webhook
user.add_slack({
    "incoming_webhook": {
        "url": "https://hooks.slack.com/services/T00/B00/XXXX"
    }
})

# Remove Slack channel
user.remove_slack({...})  # Same structure as add_slack
```

### Microsoft Teams

```python
# DM via conversation ID
user.add_ms_teams({
    "tenant_id": "tenant-id-here",
    "service_url": "https://smba.trafficmanager.net/...",
    "conversation_id": "conversation-id-here"
})

# DM via user ID
user.add_ms_teams({
    "tenant_id": "tenant-id-here",
    "service_url": "https://smba.trafficmanager.net/...",
    "user_id": "user-id-here"
})

# Use incoming webhook
user.add_ms_teams({
    "incoming_webhook": {
        "url": "https://outlook.office.com/webhook/..."
    }
})

# Remove MS Teams channel
user.remove_ms_teams({...})  # Same structure as add_ms_teams
```

## Saving User Changes

<Warning>
Changes to a user instance are not saved automatically. You must call `save()` to persist changes to SuprSend.
</Warning>

```python
user = supr_client.user.get_instance("user-123")
user.add_email("user@example.com")
user.add_sms("+1234567890")
user.set("first_name", "John")

# Save changes to SuprSend
response = user.save()
print(response)
```

Response structure:
```python
# Success
{
    "success": True,
    "status": "success",
    "status_code": 202,
    "message": "OK"
}

# Error
{
    "success": False,
    "status": "fail",
    "status_code": 500,
    "message": "Error description"
}
```

## User Properties

Beyond channels, you can store custom properties on user profiles for personalization and segmentation.

### Set Properties

Add or update properties on a user:

```python
# Set single property
user.set("first_name", "John")

# Set multiple properties
user.set({
    "first_name": "John",
    "last_name": "Doe",
    "age": 30,
    "plan": "premium"
})
```

### Set Once

Set properties only if they don't already exist:

```python
# Set single property once
user.set_once("signup_date", "2024-01-15")

# Set multiple properties once
user.set_once({
    "signup_date": "2024-01-15",
    "initial_plan": "free"
})
```

### Increment

Increment numeric properties:

```python
# Increment by specific value
user.increment("login_count", 1)
user.increment("total_spent", 99.99)

# Increment multiple properties
user.increment({
    "login_count": 1,
    "purchases": 1
})
```

### Append to Lists

Append values to list properties:

```python
# Append single value
user.append("tags", "vip")

# Append multiple values
user.append({
    "tags": "premium",
    "interests": "technology"
})
```

### Remove from Lists

Remove specific values from list properties:

```python
# Remove single value
user.remove("tags", "trial")

# Remove multiple values
user.remove({
    "tags": "trial",
    "interests": "outdated"
})
```

### Unset Properties

Delete properties entirely:

```python
# Unset single property
user.unset("temporary_flag")

# Unset multiple properties
user.unset(["temporary_flag", "old_field", "deprecated"])
```

### Unset All Channels

Delete all values for a specific channel:

```python
# Delete all emails
user.unset("$email")

# Delete multiple channel types
user.unset(["$email", "$sms", "$whatsapp"])

response = user.save()
```

Channel keys:
- Email: `$email`
- SMS: `$sms`
- WhatsApp: `$whatsapp`
- Android Push: `$androidpush`
- iOS Push: `$iospush`
- Web Push: `$webpush`
- Slack: `$slack`
- MS Teams: `$ms_teams`

## User Preferences

### Preferred Language

Set the user's preferred language using ISO 639-1 Alpha-2 codes:

```python
# Set preferred language (2-letter code)
user.set_preferred_language("en")  # English
user.set_preferred_language("es")  # Spanish
user.set_preferred_language("fr")  # French

response = user.save()
```

### Locale

Set the user's locale:

```python
user.set_locale("en_US")
response = user.save()
```

### Timezone

Set the user's timezone using IANA timezone format:

```python
user.set_timezone("America/Los_Angeles")
user.set_timezone("Europe/London")
user.set_timezone("Asia/Kolkata")

response = user.save()
```

<Info>
Timezones must be valid IANA timezone identifiers. See [IANA Time Zone Database](https://data.iana.org/time-zones/tzdb-2024a/zonenow.tab) for the complete list.
</Info>

## Bulk User Operations

For updating multiple users efficiently, use the bulk API:

```python
# Create bulk instance
bulk_ins = supr_client.bulk_users.new_instance()

# Prepare multiple users
u1 = supr_client.user.get_instance("user-1")
u1.add_email("user1@example.com")
u1.set("plan", "premium")

u2 = supr_client.user.get_instance("user-2")
u2.add_email("user2@example.com")
u2.set("plan", "free")

u3 = supr_client.user.get_instance("user-3")
u3.add_sms("+1234567890")

# Append users to bulk instance
bulk_ins.append(u1, u2, u3)
# Or append individually
# bulk_ins.append(u1)
# bulk_ins.append(u2)
# bulk_ins.append(u3)

# Save all users
response = bulk_ins.save()
print(response)
```

<Note>
- The SDK automatically chunks requests based on size limits
- Each user event must not exceed 10KB
- Maximum 400 user events per bulk API call
</Note>

## User Profile Benefits

<CardGroup cols={2}>
  <Card title="Simplified Workflows" icon="wand-magic-sparkles">
    Set channels once, then trigger workflows with just the distinct_id
  </Card>
  <Card title="Centralized Management" icon="database">
    Update user details in one place, automatically reflected everywhere
  </Card>
  <Card title="Better Personalization" icon="user-tag">
    Store custom properties for dynamic content and segmentation
  </Card>
  <Card title="Multi-Channel Ready" icon="tower-broadcast">
    Manage all communication channels from a single user profile
  </Card>
</CardGroup>

## Example: Complete User Setup

```python
from suprsend import Suprsend

# Initialize
supr_client = Suprsend("workspace_key", "workspace_secret")

# Get user instance
user = supr_client.user.get_instance("user-123")

# Add communication channels
user.add_email("john@example.com")
user.add_sms("+1234567890")
user.add_androidpush("fcm_token_here")

# Set user properties
user.set({
    "first_name": "John",
    "last_name": "Doe",
    "plan": "premium",
    "signup_date": "2024-01-15"
})

# Set preferences
user.set_preferred_language("en")
user.set_timezone("America/New_York")

# Save everything
response = user.save()

if response["success"]:
    print("User profile updated successfully!")
else:
    print(f"Error: {response['message']}")
```

## Size Limitations

<Warning>
A single user identity event must not exceed **10KB** (10,240 bytes). The SDK will raise an error if this limit is exceeded.
</Warning>

See implementation: `/home/daytona/workspace/source/src/suprsend/subscriber.py:84`

## Related Concepts

- [Workflows](/core-concepts/workflows) - Trigger notifications to users
- [Channels](/core-concepts/channels) - Learn about supported communication channels
- [Events](/core-concepts/events) - Track user behavior and properties

## API Reference

- [User API](/api-reference/users/update) - Complete user API documentation
- [Bulk Users](/api-reference/users/bulk-update) - Bulk operations documentation