---
title: 'Channel Management'
description: 'Add and remove communication channels like email, SMS, push notifications, Slack, and MS Teams'
---

## Overview

Channel management allows you to add and remove communication channels for users. Once channels are set in a user profile, you can trigger workflows using just the `distinct_id`, and SuprSend will automatically use the associated channels.

## Email

Add and remove email addresses for a user.

### Adding Email

```python
from suprsend import Suprsend

supr_client = Suprsend("workspace_key", "workspace_secret")
user = supr_client.user.get_instance("user_123")

# Add email
user.add_email("user@example.com")

response = user.save()
print(response)
```

### Removing Email

```python
# Remove specific email
user.remove_email("user@example.com")

response = user.save()
```

### Deleting All Emails

```python
# Unset all emails for the user
user.unset("$email")

response = user.save()
```

## SMS

Add and remove SMS phone numbers.

### Adding SMS

```python
# Add SMS number (include country code)
user.add_sms("+19999999999")

response = user.save()
```

### Removing SMS

```python
# Remove specific SMS number
user.remove_sms("+19999999999")

response = user.save()
```

### Deleting All SMS Numbers

```python
# Unset all SMS numbers
user.unset("$sms")

response = user.save()
```

## WhatsApp

Add and remove WhatsApp phone numbers.

### Adding WhatsApp

```python
# Add WhatsApp number (include country code)
user.add_whatsapp("+19999999999")

response = user.save()
```

### Removing WhatsApp

```python
# Remove specific WhatsApp number
user.remove_whatsapp("+19999999999")

response = user.save()
```

### Deleting All WhatsApp Numbers

```python
# Unset all WhatsApp numbers
user.unset("$whatsapp")

response = user.save()
```

## Android Push

Add and remove Android push notification tokens. Supports multiple providers: FCM (default), Xiaomi, and Oppo.

### Adding Android Push Token

```python
# Add FCM token (default provider)
user.add_androidpush("fcm_token_here")

# Add Xiaomi token
user.add_androidpush("xiaomi_token_here", provider="xiaomi")

# Add Oppo token
user.add_androidpush("oppo_token_here", provider="oppo")

response = user.save()
```

### Removing Android Push Token

```python
# Remove FCM token
user.remove_androidpush("fcm_token_here")

# Remove Xiaomi token
user.remove_androidpush("xiaomi_token_here", provider="xiaomi")

response = user.save()
```

### Deleting All Android Push Tokens

```python
# Unset all Android push tokens
user.unset("$androidpush")

response = user.save()
```

## iOS Push

Add and remove iOS push notification tokens.

### Adding iOS Push Token

```python
# Add iOS push token
user.add_iospush("ios_push_token_here")

response = user.save()
```

### Removing iOS Push Token

```python
# Remove iOS push token
user.remove_iospush("ios_push_token_here")

response = user.save()
```

### Deleting All iOS Push Tokens

```python
# Unset all iOS push tokens
user.unset("$iospush")

response = user.save()
```

## Web Push

Add and remove web push notification subscriptions.

### Adding Web Push

```python
# Add web push subscription (VAPID format)
web_push_subscription = {
    "endpoint": "https://fcm.googleapis.com/fcm/send/...",
    "keys": {
        "p256dh": "key_here",
        "auth": "auth_here"
    }
}

user.add_webpush(web_push_subscription, provider="vapid")

response = user.save()
```

### Removing Web Push

```python
# Remove web push subscription
user.remove_webpush(web_push_subscription, provider="vapid")

response = user.save()
```

### Deleting All Web Push Subscriptions

```python
# Unset all web push subscriptions
user.unset("$webpush")

response = user.save()
```

## Slack

Add and remove Slack channels for notifications. Supports multiple methods: email-based DM, user ID-based DM, channel ID, and incoming webhooks.

### Adding Slack Channel

```python
# DM user using email
user.add_slack({
    "email": "user@example.com",
    "access_token": "xoxb-XXXXXXXXXXXX"
})

# DM user using Slack member ID
user.add_slack({
    "user_id": "U03XXXXXXXX",
    "access_token": "xoxb-XXXXXXXXXXXX"
})

# Send to a Slack channel
user.add_slack({
    "channel_id": "C03XXXXXXXX",
    "access_token": "xoxb-XXXXXXXXXXXX"
})

# Use incoming webhook
user.add_slack({
    "incoming_webhook": {
        "url": "https://hooks.slack.com/services/TXXXXXXXXX/BXXXXXX/XXXXXXX"
    }
})

response = user.save()
```

### Removing Slack Channel

```python
# Remove Slack channel using email
user.remove_slack({
    "email": "user@example.com",
    "access_token": "xoxb-XXXXXXXXXXXX"
})

# Remove using user ID
user.remove_slack({
    "user_id": "U03XXXXXXXX",
    "access_token": "xoxb-XXXXXXXXXXXX"
})

# Remove using channel ID
user.remove_slack({
    "channel_id": "C03XXXXXXXX",
    "access_token": "xoxb-XXXXXXXXXXXX"
})

# Remove incoming webhook
user.remove_slack({
    "incoming_webhook": {
        "url": "https://hooks.slack.com/services/TXXXXXXXXX/BXXXXXX/XXXXXXX"
    }
})

response = user.save()
```

### Deleting All Slack Channels

```python
# Unset all Slack channels
user.unset("$slack")

response = user.save()
```

## Microsoft Teams

Add and remove Microsoft Teams channels. Supports conversation-based DM, user ID-based DM, and incoming webhooks.

### Adding MS Teams Channel

```python
# DM on Team's channel using conversation ID
user.add_ms_teams({
    "tenant_id": "XXXXXXX",
    "service_url": "https://smba.trafficmanager.net/XXXXXXXXXX",
    "conversation_id": "XXXXXXXXXXXX"
})

# DM user using Teams user ID
user.add_ms_teams({
    "tenant_id": "XXXXXXX",
    "service_url": "https://smba.trafficmanager.net/XXXXXXXXXX",
    "user_id": "XXXXXXXXXXXX"
})

# Use incoming webhook
user.add_ms_teams({
    "incoming_webhook": {
        "url": "https://XXXXX.webhook.office.com/webhookb2/XXXXXXXXXX@XXXXXXXXXX/IncomingWebhook/XXXXXXXXXX/XXXXXXXXXX"
    }
})

response = user.save()
```

### Removing MS Teams Channel

```python
# Remove using conversation ID
user.remove_ms_teams({
    "tenant_id": "XXXXXXX",
    "service_url": "https://smba.trafficmanager.net/XXXXXXXXXX",
    "conversation_id": "XXXXXXXXXXXX"
})

# Remove using user ID
user.remove_ms_teams({
    "tenant_id": "XXXXXXX",
    "service_url": "https://smba.trafficmanager.net/XXXXXXXXXX",
    "user_id": "XXXXXXXXXXXX"
})

# Remove incoming webhook
user.remove_ms_teams({
    "incoming_webhook": {
        "url": "https://XXXXX.webhook.office.com/webhookb2/XXXXXXXXXX@XXXXXXXXXX/IncomingWebhook/XXXXXXXXXX/XXXXXXXXXX"
    }
})

response = user.save()
```

### Deleting All MS Teams Channels

```python
# Unset all MS Teams channels
user.unset("$ms_teams")

response = user.save()
```

## Complete Example

Here's a complete example showing how to add multiple channels to a user:

```python
from suprsend import Suprsend

# Initialize SDK
supr_client = Suprsend("workspace_key", "workspace_secret")

# Create user instance
user = supr_client.user.get_instance("user_123")

# Add email
user.add_email("user@example.com")

# Add SMS
user.add_sms("+19999999999")

# Add WhatsApp
user.add_whatsapp("+19999999999")

# Add Android push (FCM)
user.add_androidpush("android_fcm_token")

# Add iOS push
user.add_iospush("ios_push_token")

# Add Slack using email
user.add_slack({
    "email": "user@example.com",
    "access_token": "xoxb-XXXXXXXXXXXX"
})

# Add MS Teams using incoming webhook
user.add_ms_teams({
    "incoming_webhook": {
        "url": "https://XXXXX.webhook.office.com/webhookb2/..."
    }
})

# Save all changes
response = user.save()

if response["success"]:
    print("All channels added successfully")
else:
    print(f"Error: {response['message']}")
```

## Using Channels in Workflows

Once channels are set in the user profile, you can trigger workflows with just the `distinct_id`:

```python
from suprsend import WorkflowTriggerRequest

# Trigger workflow - channels are automatically loaded from user profile
wf = WorkflowTriggerRequest(
    body={
        "workflow": "order_confirmation",
        "recipients": [
            {
                "distinct_id": "user_123"
                # Email, SMS, and other channels are automatically included
            }
        ],
        "data": {
            "order_id": "ORD-123",
            "amount": "$99.99"
        }
    }
)

response = supr_client.workflows.trigger(wf)
```

### Restricting Channels in Workflow

You can restrict which channels to use for a specific workflow trigger:

```python
# Only send to email, even if user has SMS and other channels
wf = WorkflowTriggerRequest(
    body={
        "workflow": "weekly_newsletter",
        "recipients": [
            {
                "distinct_id": "user_123",
                "$channels": ["email"]  # Only use email for this workflow
            }
        ],
        "data": {
            "newsletter_content": "..."
        }
    }
)

response = supr_client.workflows.trigger(wf)
```

## Deleting Multiple Channels

You can delete multiple channels in a single operation:

```python
# Delete all email, SMS, and WhatsApp channels
user.unset(["$email", "$sms", "$whatsapp"])

response = user.save()
```

## Channel Keys Reference

| Channel | Key |
|---------|-----|
| Email | `$email` |
| SMS | `$sms` |
| WhatsApp | `$whatsapp` |
| Android Push | `$androidpush` |
| iOS Push | `$iospush` |
| Web Push | `$webpush` |
| Slack | `$slack` |
| MS Teams | `$ms_teams` |

## Best Practices

<CardGroup cols={2}>
  <Card title="Validate Phone Numbers" icon="phone">
    Always include country codes for SMS and WhatsApp numbers (e.g., +1 for US).
  </Card>
  <Card title="Token Management" icon="key">
    Regularly update push tokens when users reinstall apps or change devices.
  </Card>
  <Card title="Test Channels" icon="flask">
    Test each channel after adding to ensure proper configuration.
  </Card>
  <Card title="Secure Tokens" icon="lock">
    Never expose access tokens or webhook URLs in client-side code.
  </Card>
</CardGroup>

## Next Steps

<CardGroup cols={2}>
  <Card title="Managing Users" icon="user" href="/users/managing-users">
    Learn the basics of user management
  </Card>
  <Card title="User Properties" icon="sliders" href="/users/user-properties">
    Set language, timezone, and custom properties
  </Card>
  <Card title="Bulk Operations" icon="users" href="/users/bulk-operations">
    Add channels for multiple users at once
  </Card>
</CardGroup>